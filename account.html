<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administrator System</title>
    <link rel="stylesheet" href="log.css">
</head>
<body>
    <div class="container">
        <h1>Administrator System</h1>

        <p><strong>Email:</strong></p>
        <input type="email" id="emailInput">

        <p><strong>Password:</strong></p>
        <input type="text" id="passwordInput" placeholder="Enter new password">

        <p><strong>Action Type:</strong></p>
        <select id="actionType">
            <option value="Admin">Admin</option>
            <option value="Personal">Personal</option>
            <option value="Normal">Normal</option>
        </select>

        <button onclick="updateAccount()">Update Account</button>
        <button onclick="goToHome()">Go to Home</button>

        <h2>All Logged-In Accounts</h2>
        <table id="accountTable">
            <tr>
                <th>Email</th>
                <th>Password</th>
                <th>Action</th>
                <th>Options</th>
            </tr>
        </table>
    </div>
    <script src="log.js"></script>
    <script src="login.js"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function () {
    let table = document.getElementById("accountTable");
    let storedAccounts = JSON.parse(localStorage.getItem("accounts")) || [];

    // Extract accounts from the table and update localStorage
    let extractedAccounts = [];
    for (let i = 1; i < table.rows.length; i++) { // Skip header row
        let row = table.rows[i];
        let email = row.cells[0].innerText.trim();
        let password = row.cells[1].innerText.trim();

        if (email && password) {
            extractedAccounts.push({ email: email, password: password });
        }
    }

    if (extractedAccounts.length > 0) {
        localStorage.setItem("accounts", JSON.stringify(extractedAccounts));
    }

    // Display the logged-in user
    let loggedInUser = JSON.parse(localStorage.getItem("loggedInUser"));

    if (loggedInUser) {
        document.getElementById("emailInput").value = loggedInUser.email;
        document.getElementById("passwordInput").value = loggedInUser.password;
    } else {
        alert("You must log in first!");
        window.location.href = "index.html";
    }
});

// Function to manually add an account to the table and localStorage
function updateAccount() {
    let email = document.getElementById("emailInput").value.trim();
    let password = document.getElementById("passwordInput").value.trim();

    if (!email || !password) {
        alert("Please enter both email and password!");
        return;
    }

    let storedAccounts = JSON.parse(localStorage.getItem("accounts")) || [];
    let existingAccount = storedAccounts.find(acc => acc.email === email);

    if (existingAccount) {
        existingAccount.password = password; // Update password if email exists
    } else {
        storedAccounts.push({ email: email, password: password });
    }

    localStorage.setItem("accounts", JSON.stringify(storedAccounts));

    alert("Account updated successfully!");
    location.reload();
}

// Function to go to the home page
function goToHome() {
    window.location.href = "home.html";
}
    </script>
</body>
</html>.